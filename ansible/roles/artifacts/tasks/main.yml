- name: Ensure CodeDeploy scripts directory exists
  file:
    path: /opt/codedeploy-scripts
    state: directory
    mode: '0755'

- name: Download product1.zip from S3 using AWS CLI
  command: >
    aws s3 cp
    s3://base-template-devin/product1.zip
    /opt/codedeploy-scripts/product1.zip

- name: Set permissions on product1.zip
  file:
    path: /opt/codedeploy-scripts/product1.zip
    mode: '0755'